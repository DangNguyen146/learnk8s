<match vnw_error.**>
    @type copy
    <store>
        @type file
        format json
        path /data/td-agent/logs/prod/access/vnw_error
        time_slice_format %Y%m%d
        time_slice_wait 10m
        time_format %Y-%m-%d %H:%M:%S
        #include_time_key true
        compress gzip
        buffer_type file
        buffer_chunk_limit 1024m
        buffer_queue_limit 10240
        buffer_path /data/td-agent/logs/prod/buffer/buffer_vnw_error
        disable_retry_limit false
        retry_limit 17
    </store>
    <store>
        @type elasticsearch
        host 172.16.5.47
        # user td-agent
        # password aJtK29az9mzTSMi
        port 9200
        logstash_format true
        type_name vnw_error
        logstash_prefix vnw_error
        verify_es_version_at_startup false
        default_elasticsearch_version 5
        #buffer_type memory
        time_key_format "%Y-%m-%d %H:%M:%S"
        buffer_type file
        buffer_chunk_limit 1024m
        buffer_queue_limit 10240
        buffer_path /data/td-agent/logs/prod/buffer/buffer_elasticsearch_vnw_error
        flush_mode interval
        flush_interval 1s
        retry_limit 17
        num_threads 1
        request_timeout 20s
        <secondary>
            @type secondary_file
            directory /data/td-agent/errors
            basename geoip_vnw_error.logs
        </secondary>
    </store>
</match>