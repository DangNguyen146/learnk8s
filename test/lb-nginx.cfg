
###############################################################################
# template.CFG - OBJECT CONFIG FILE FOR MONITORING KONG SERVICE
# Author: Tuonghv
# Created: Apr 24, 2022
# Edited: Apr 24, 2022
###############################################################################


###############################################################################
# HOST DEFINITION
###############################################################################

define host{
        use                             navigos_linux_server                            ; Name of host template to use
        host_name                       lb-nginx                            
        alias                           lb-nginx                            
        hostgroups                      LoadBalance_Servers                             
        contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc    
        address                         10.122.4.43                                   
        icon_image                      lvs.gif                                         
        vrml_image                      lvs.gif                                         
        statusmap_image                 lvs.gif                                         
}


###############################################################################
# SERVICE DEFINITIONS
###############################################################################
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.admin                                  
        check_command                   check_kong_upstreams!"admin"!"admin.vietnamworks.com"!"10.122.5.134:39033"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.api-gateway                                  
        check_command                   check_kong_upstreams!"api-gateway"!"ms.vietnamworks.com"!"10.122.4.204:8000,10.122.4.205:8000,10.122.4.206:8000"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.employer                                  
        check_command                   check_kong_upstreams!"employer"!"employer.vietnamworks.com"!"10.122.5.111:40296,10.122.5.112:40296,10.122.5.113:40296,10.122.5.116:40296"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.employerdashboardfrontend                                  
        check_command                   check_kong_upstreams!"employerdashboardfrontend"!"superadmin.vietnamworks.com"!"10.122.5.111:41558"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.frontends_onboarding                                  
        check_command                   check_kong_upstreams!"frontends_onboarding"!"superadmin.vietnamworks.com"!"10.122.5.116:37980"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.images                                  
        check_command                   check_kong_upstreams!"images"!"images.vietnamworks.com"!"10.122.3.97:80"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.images2                                  
        check_command                   check_kong_upstreams!"images2"!"images02.vietnamworks.com"!"10.122.3.98:80"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.images3                                  
        check_command                   check_kong_upstreams!"images3"!"images.vietnamworks.com"!"10.122.3.99:80"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.images4                                  
        check_command                   check_kong_upstreams!"images4"!"images04.vietnamworks.com"!"10.122.6.16:80"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.nld_homepape                                  
        check_command                   check_kong_upstreams!"nld_homepape"!"job.nld.com.vn"!"10.122.5.139:34191"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.openapi                                  
        check_command                   check_kong_upstreams!"openapi"!"openapi.vietnamworks.com"!"10.122.5.132:36045,10.122.5.131:36045,10.122.5.133:36045"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.page_container                                  
        check_command                   check_kong_upstreams!"page_container"!"www.vietnamworks.com"!"10.122.5.111:44109,10.122.5.112:44109,10.122.5.113:44109,10.122.5.114:44109,10.122.5.115:44109"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.secure                                  
        check_command                   check_kong_upstreams!"secure"!"secure.vietnamworks.com"!"10.122.5.115:45466,10.122.5.111:45466,10.122.5.112:45466,10.122.5.113:45466,10.122.5.114:45466"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.sentrytrack                                  
        check_command                   check_kong_upstreams!"sentrytrack"!"sentry-track.vietnamworks.com"!"10.122.4.46:9000"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.sims                                  
        check_command                   check_kong_upstreams!"sims"!"sims.vietnamworks.com"!"10.122.4.45:80"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.superadmin                                  
        check_command                   check_kong_upstreams!"superadmin"!"superadmin.vietnamworks.com"!"10.122.5.111:47808"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.vietnamworks                                  
        check_command                   check_kong_upstreams!"vietnamworks"!"www.vietnamworks.com"!"10.122.5.111:44831,10.122.5.112:44831,10.122.5.113:44831,10.122.5.114:44831,10.122.5.115:44831,10.122.5.116:44831"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.webservices                                  
        check_command                   check_kong_upstreams!"webservices"!"api.vietnamworks.com"!"10.122.5.111:47165,10.122.5.112:47165,10.122.5.113:47165,10.122.5.114:47165,10.122.5.115:47165"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.widget                                  
        check_command                   check_kong_upstreams!"widget"!"widget.vietnamworks.com"!"10.122.5.135:30149,10.122.5.136:30149"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       lb-nginx                                        
        service_description             lb-nginx.wowcv                                  
        check_command                   check_kong_upstreams!"wowcv"!"wowcv.vietnamworks.com"!"10.122.5.116:47633,10.122.5.115:47633"                                                      
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                
                