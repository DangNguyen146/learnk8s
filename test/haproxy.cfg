###############################################################################
# vHP01.CFG - OBJECT CONFIG FILE FOR MONITORING vHP01 DATABASE SERVER
# Author: Tuonghv
# Created: Apr 24, 2022
# Edited: Apr 24, 2022
###############################################################################


###############################################################################
# HOST DEFINITION
###############################################################################

define host{
        use                             navigos_linux_server                            ; Name of host template to use
        host_name                       haproxy                            
        alias                           haproxy                            
        hostgroups                      LoadBalance_Servers
        address                         172.16.5.94
        icon_image                      lvs.gif                                         
        vrml_image                      lvs.gif                                         
        statusmap_image                 lvs.gif                                         
}


###############################################################################
# SERVICE DEFINITIONS
###############################################################################

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.haproxy01                                  
        check_command                   check_haproxy_v2_stats!172.16.5.204:9000!haproxy01!500!1000                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.haproxy02                                  
        check_command                   check_haproxy_v2_stats!172.16.5.205:9000!haproxy02!500!1000                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.haproxy03                                  
        check_command                   check_haproxy_v2_stats!172.16.5.206:9000!haproxy03!1000!1500                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}                              
# monitor service


define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.session-memcache                                  
        check_command                   check_haproxy_service!haproxy03!"session-memcache"!"800,1000"!"800,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.api-memcache                                  
        check_command                   check_haproxy_service!haproxy03!"api-memcache"!"800,1000"!"800,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.employer-memcache                                  
        check_command                   check_haproxy_service!haproxy03!"employer-memcache"!"500,1000"!"500,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.smtp-gateway-tcp                                  
        check_command                   check_haproxy_service!haproxy03!"smtp-gateway-tcp"!"800,1000"!"800,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.rabbitmq-core                                  
        check_command                   check_haproxy_service!haproxy03!"rabbitmq-core"!"100,1000"!"100,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.redis-employer                                  
        check_command                   check_haproxy_service!haproxy03!"redis-employer"!"800,1000"!"800,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.kafka                                  
        check_command                   check_haproxy_service!haproxy03!"kafka"!"800,1000"!"800,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.lbdb                                  
        check_command                   check_haproxy_service!haproxy02!"lbdb"!"110,800"!"110,800"!"10,0"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.redis-cache                                  
        check_command                   check_haproxy_service!haproxy02!"redis-cache"!"800,1000"!"800,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.redis-online                                  
        check_command                   check_haproxy_service!haproxy02!"redis-online"!"800,1000"!"800,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.redis-mail                                  
        check_command                   check_haproxy_service!haproxy02!"redis-mail"!"800,1000"!"800,1000"!"1,0"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                

define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.redis-jobalert                                  
        check_command                   check_haproxy_service!haproxy02!"redis-jobalert"!"800,1000"!"800,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}
                                
define service{
        use                             local-service,navigos_service_backend               
        host_name                       haproxy                                        
        service_description             haproxy.redis-sso                                  
        check_command                   check_haproxy_service!haproxy01!"redis-sso"!"800,1000"!"800,1000"!"-1,-1"                                                          
        # contact_groups                  System_Admins,System_Admins_SMS,nagios_newdc  
        normal_check_interval           1                                               ; Check the service every 10 minutes under normal conditions
        retry_check_interval            1                                               ; Re-check the service every two minutes until a hard state can be determined
        notification_interval           10                                               ; Re-notify about service problems every hour                                                    
        notifications_enabled           0                                               
        register                        1                                               
}