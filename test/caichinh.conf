<source>
    @type tail
    path /data/docker/volumes/www-logs/_data/vietnamworks.com_error.log
    format /^(?<time>[^ ]+ [^ ]+) \[(?<log_level>.*)\] (?<pid>[^#]*)#(?<tid>[^:]*): (?<message>.*)$/
    pos_file /data/td-agent/tmp/vnw_error.pos
    time_format %d/%b/%Y:%H:%M:%S %z
    tag vnw.nginx.error
</source>
<match vnw.**>
    @type record_modifier
     <record>
        service "vietnamworks"
        hostname "#{Socket.gethostname}"
    </record>
    tag vnw_error
</match>
<match vnw_error.**>
    @type copy
    <store>
        @type forward
        send_timeout 60s
        recover_wait 300s
        hard_timeout 60s
        heartbeat_interval 1s
        phi_threshold 16
        flush_interval 0
        <server>
            name staging-centerlog
            host 172.16.5.75
            port 1514
            weight 60
        </server>
    </store>
</match>




/^(?<time>[^ ]+ [^ ]+) \[(?<log_level>.*)\] (?<pid>[^#]*)#(?<tid>[^:]*): (?<message>.*)$/

2022-08-15 17:43:24 +0700 [trace]: #0 bulk response: {"took"=>1, "errors"=>false, "items"=>[{"index"=>{"_index"=>"vnw_access-2022.08.15", "_type"=>"vnw_access", "_id"=>"vcMZoYIBiU6RHKUa_nKk", "_version"=>1, "result"=>"created", "_shards"=>{"total"=>2, "successful"=>1, "failed"=>0}, "_seq_no"=>106000, "_primary_term"=>1, "status"=>201}}, {"index"=>{"_index"=>"vnw_access-2022.08.15", "_type"=>"vnw_access", "_id"=>"vsMZoYIBiU6RHKUa_nKk", "_version"=>1, "result"=>"created", "_shards"=>{"total"=>2, "successful"=>1, "failed"=>0}, "_seq_no"=>106001, "_primary_term"=>1, "status"=>201}}, {"index"=>{"_index"=>"vnw_access-2022.08.15", "_type"=>"vnw_access", "_id"=>"v8MZoYIBiU6RHKUa_nKk", "_version"=>1, "result"=>"created", "_shards"=>{"total"=>2, "successful"=>1, "failed"=>0}, "_seq_no"=>106002, "_primary_term"=>1, "status"=>201}}]}


format /^(?<time>[^ ]+ [^ ]+) \[(?<log_level>.*)\] (?<pid>[^#]*)#(?<tid>[^:]*): (?<message>.*)$/