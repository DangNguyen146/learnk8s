<match vnw_api_error.**>
    @type copy
    <store>
        @type file
        format json
        path /data/td-agent/logs/prod/error/vnw_api_error
        time_slice_format %Y%m%d
        time_slice_wait 10m
        time_format %Y-%m-%d %H:%M:%S
        include_time_key true
        compress gzip
        buffer_type file
        buffer_chunk_limit 1024m
        buffer_queue_limit 10240
        buffer_path /data/td-agent/logs/prod/buffer/buffer_vnw_api_error
        disable_retry_limit false
        retry_limit 17
    </store>
    <store>
        @type elasticsearch
        host 172.16.4.47
        # user td-agent
        # password aJtK29az9mzTSMi
        port 9200
        logstash_format true
        type_name vnw_error
        logstash_prefix vnw_api_error
        verify_es_version_at_startup false
        default_elasticsearch_version 5
        #buffer_type memory
        buffer_type file
        buffer_chunk_limit 1024m
        buffer_queue_limit 10240
        buffer_path /data/td-agent/logs/prod/buffer/buffer_es_vnw_api_error
        flush_interval 5s
        retry_limit 17
        num_threads 1
        request_timeout 45s
    </store>
</match>