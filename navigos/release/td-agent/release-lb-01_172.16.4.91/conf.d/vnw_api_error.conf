<source>
    type tail
    format /^(?<time>[^ ]+ [^ ]+) \[(?<log_level>.*)\] (?<pid>[^#]*)#(?<tid>[^:]*): (?<message>.*)$/
    tag ms_error.log
    pos_file /data/td-agent/tmp/ms_error.pos
    path /data/docker/volumes/www-logs/_data/ms.vietnamworks.com_error.log
</source>
<match ms_error.**>
    @type record_modifier
    <record>
        service "ms"
        servername "#{Socket.gethostname}"
    </record>
    tag vnw_api_error.log
</match>
<source>
    type tail
    format /^(?<time>[^ ]+ [^ ]+) \[(?<log_level>.*)\] (?<pid>[^#]*)#(?<tid>[^:]*): (?<message>.*)$/
    tag api_error.log
    pos_file /data/td-agent/tmp/api_error.pos
    path /data/docker/volumes/www-logs/_data/api.vietnamworks.com_error.log
</source>
<match api_error.**>
    @type record_modifier
    <record>
        service "api"
        servername "#{Socket.gethostname}"
    </record>
    tag vnw_api_error.log
</match>
<source>
    type tail
    format /^(?<time>[^ ]+ [^ ]+) \[(?<log_level>.*)\] (?<pid>[^#]*)#(?<tid>[^:]*): (?<message>.*)$/
    tag openapi_error.log
    pos_file /data/td-agent/tmp/openapi_error.pos
    path /data/docker/volumes/www-logs/_data/openapi.vietnamworks.com_error.log
</source>
<match openapi_error.**>
    @type record_modifier
    <record>
        service "openapi"
        servername "#{Socket.gethostname}"
    </record>
    tag vnw_api_error.log
</match>
<match vnw_api_error.**>
    @type copy
    <store>
        @type forward
        send_timeout 60s
        recover_wait 300s
        hard_timeout 60s
        heartbeat_interval 1s
        phi_threshold 16
        flush_interval 0
        <server>
            name release-centerLog
            host 172.16.4.75
            port 1514
            weight 60
        </server>
    </store>
</match>