<source>
    @type tail
    path /data/docker/volumes/www-logs/_data/openapi.vietnamworks.com_access.log
    pos_file /data/td-agent/tmp/openapi_access.pos
   format /^(?<remote>[^ ]*) (?<host_value>[^ ]*) (?<user>[^ ]*) \[(?<time>[^\]]*)\] (?<upstream_cache_status>[^ ]*) (?<upstream_addr>[^ ]*) "(?<method>\S+)(?: +(?<path>[^\"]*) +\S*)?" (?<code>[^ ]*) (?<size>[^ ]*) (?<request_time>[^ ]*) (?<upstream_reponse_time>[^ ]*)(?: "(?<referer>[^\"]*)" "(?<agent>[^\"]*)" "(?<http_x_forwarded>[^\"]*)" "(?<host>[^\"]*)" "(?<http_origin>[^\"]*)" "(?<proxy_host>[^\"]*)")?$/
    time_format %d/%b/%Y:%H:%M:%S %z
    tag openapi.nginx.access
</source>
<filter openapi.**>
    type typecast
    types size:integer,request_time:float,upstream_reponse_time:float
</filter>
<match openapi.**>
    @type record_modifier
    <record>
    service "openapi"
    branch "release"
    servername "#{Socket.gethostname}"
    </record>
    tag vnw_api_access
</match>
<match vnw_api_access.**>
    @type copy
    <store>
        @type forward
        send_timeout 60s
        recover_wait 300s
        hard_timeout 60s
        heartbeat_interval 1s
        phi_threshold 16
        flush_interval 0
        <server>
            name release-centerLog
            host 172.16.5.75
            port 1514
            weight 60
        </server>
    </store>
</match>